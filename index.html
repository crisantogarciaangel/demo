<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DULCE MIR ‚Äî Memorama</title>
  <style>
    :root{
      /* Paleta chic */
      --bg:#fff5f9;
      --bg2:#fde7ff;
      --panel:#ffffff;
      --muted:#6b7280;
      --text:#1f2937;
      --primary:#ec4899;
      --primary-2:#f472b6;
      --accent:#a78bfa;
      --accent-2:#c4b5fd;
      --success:#22c55e;
      --shadow:0 14px 30px rgba(236,72,153,.15);
      --card-shadow:0 12px 24px rgba(167,139,250,.25);
      --radius:18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui;
      background:
        radial-gradient(1400px 900px at 15% 10%, var(--bg2) 0%, var(--bg) 40%),
        radial-gradient(1200px 800px at 85% 90%, #ffe3ef 0%, var(--bg) 45%);
      color:var(--text); display:grid; place-items:center; padding:24px;
    }
    .container{width:min(1100px, 100%);}
    header{
      display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between; gap:12px; margin-bottom:16px;
    }
    h1{font-size:clamp(22px, 3vw, 34px); margin:0; letter-spacing:.4px}
    .subtitle{color:var(--muted); font-size:14px}

    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.88));
      border:1px solid rgba(220,176,210,.45); border-radius:16px; padding:14px 16px; box-shadow:var(--shadow);
      display:flex; align-items:center; gap:14px; flex-wrap:wrap;
    }
    .stat{font-size:14px; color:var(--muted)}
    .stat b{color:var(--text)}
    button.control{
      background:linear-gradient(180deg, var(--primary), var(--primary-2));
      border:none; color:white; padding:10px 16px; border-radius:999px; cursor:pointer; font-weight:700; box-shadow:0 10px 18px rgba(236,72,153,.28);
      transition: transform .08s ease, filter .2s ease; outline:none;
    }
    button.control:hover{filter:brightness(1.06)}
    button.control:active{transform:translateY(1px) scale(.99)}

    /* Tablero */
    .board{
      display:grid; gap:14px; padding:16px;
      background:linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.9));
      border:1px solid rgba(220,176,210,.45); border-radius:20px; box-shadow:var(--shadow);
      grid-template-columns: repeat(4, minmax(74px, 1fr));
    }
    @media (max-width:520px){
      .board{grid-template-columns: repeat(4, minmax(64px, 1fr)); gap:10px; padding:12px}
    }

    /* Cartas */
    .card{ position:relative; aspect-ratio: 1 / 1; border:0; background:none; padding:0; cursor:pointer; outline:none; }
    .card[disabled]{cursor:default}
    .card-inner{ position:absolute; inset:0; border-radius:var(--radius); transform-style:preserve-3d; transition: transform .5s ease; box-shadow: var(--card-shadow); }
    .card:not(.matched):focus-visible .card-inner{ box-shadow:0 0 0 3px var(--accent), var(--card-shadow); }
    .card.flipped .card-inner{ transform:rotateY(180deg); }

    .face{
      position:absolute; inset:0; display:grid; place-items:center; border-radius:var(--radius);
      backface-visibility:hidden; -webkit-backface-visibility:hidden; font-size:clamp(28px, 6vw, 44px); overflow:hidden;
    }

    .front{
      border:1px solid rgba(220,176,210,.5);
      background:
        radial-gradient(10px 10px at 25% 30%, rgba(252,231,243,.85) 45%, transparent 46%),
        radial-gradient(8px 8px at 70% 65%, rgba(221,214,254,.9) 45%, transparent 46%),
        linear-gradient(180deg, rgba(255,255,255,.98), rgba(255,255,255,.92));
      font-size:clamp(28px, 6vw, 44px);
      display:grid;
      place-items:center;
    }
    .front::after{
      content:"";
      position:absolute; inset:0; border-radius:var(--radius);
      box-shadow: inset 0 0 0 2px rgba(167,139,250,.35), 0 10px 20px rgba(188,116,160,.18);
    }

    .back{
      transform:rotateY(180deg);
      background:linear-gradient(180deg, rgba(252,231,243,.95), rgba(221,214,254,.9));
      border:1px solid rgba(220,176,210,.55);
      display:flex; align-items:center; justify-content:center; padding:10%; overflow:hidden;
    }
    .back img{
      display:block; max-width:100%; max-height:100%; width:auto; height:auto; object-fit:contain; object-position:center;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.25)); border-radius:12px;
    }

    .card.matched .back{
      animation:pop .45s ease;
      box-shadow:0 0 0 2px rgba(167,139,250,.75), 0 16px 30px rgba(167,139,250,.35);
    }
    @keyframes pop{0%{transform:rotateY(180deg) scale(1)} 50%{transform:rotateY(180deg) scale(1.06)} 100%{transform:rotateY(180deg) scale(1)}}

    /* Modal */
    .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(255, 240, 248, .55); backdrop-filter: blur(6px); }
    .modal.show{ display:flex }
    .modal-card{ background:var(--panel); border:1px solid rgba(220,176,210,.45); border-radius:18px; padding:22px 20px; width:min(420px, 92%); text-align:center; box-shadow:var(--shadow); }
    .modal-card h2{ margin:0 0 6px 0 }
    .modal-card p{ color:var(--muted); margin:6px 0 16px }
    .chips{ display:flex; gap:10px; justify-content:center; margin:12px 0 16px }
    .chip{ background:linear-gradient(180deg, #ffe7f3, #f7e8ff); border:1px solid rgba(220,176,210,.45); padding:8px 10px; border-radius:999px; font-weight:700; color:#7c3aed }
    .actions{ display:flex; justify-content:center; gap:10px }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>DULCE MIR ‚Äî Memorama</h1>
        <div class="subtitle">Empareja todas las cartas. </div>
      </div>
      <div class="panel" role="group" aria-label="Controles del juego">
        <button id="newGame" class="control">üîÑ Nuevo juego</button>
        <div class="stat">Movidas: <b id="moves">0</b></div>
        <div class="stat">Tiempo: <b id="time">00:00</b></div>
        <div class="stat">Parejas: <b id="pairs">0/8</b></div>
      </div>
    </header>

    <section id="board" class="board" aria-label="Tablero de memorama"></section>
  </div>

  <div id="win" class="modal" role="dialog" aria-modal="true">
    <div class="modal-card">
      <h2 id="winTitle">¬°Eres incre√≠ble! ‚ú®</h2>
      <p id="winDesc">¬°Completaste todas las parejas con estilo!</p>
      <div class="chips">
        <div class="chip">‚è±Ô∏è <span id="finalTime">00:00</span></div>
        <div class="chip">üéØ <span id="finalMoves">0</span> movidas</div>
      </div>
      <div class="actions">
        <button id="playAgain" class="control">Jugar de nuevo</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const icons = [
        "foto1.jpg","foto2.jpg","foto3.jpg","foto4.jpg",
        "foto5.jpg","foto6.jpg","foto7.jpg","foto8.jpg"
      ];
      const board = document.getElementById('board');
      const movesEl = document.getElementById('moves');
      const timeEl = document.getElementById('time');
      const pairsEl = document.getElementById('pairs');
      const modal = document.getElementById('win');
      const finalTimeEl = document.getElementById('finalTime');
      const finalMovesEl = document.getElementById('finalMoves');
      const newGameBtn = document.getElementById('newGame');
      const playAgainBtn = document.getElementById('playAgain');

      let first = null, second = null, lock = false;
      let moves = 0, matches = 0;
      let seconds = 0, timer = null, started = false;

      function formatTime(s){
        const m = Math.floor(s/60).toString().padStart(2,'0');
        const r = (s%60).toString().padStart(2,'0');
        return `${m}:${r}`;
      }
      function startTimer(){ if(timer) return; timer = setInterval(()=>{ seconds++; timeEl.textContent = formatTime(seconds); }, 1000); }
      function stopTimer(){ clearInterval(timer); timer = null; }

      function shuffle(array){
        for(let i=array.length-1;i>0;i--){
          const j = Math.floor(Math.random()*(i+1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      function createCard(symbol){
        const btn = document.createElement('button');
        btn.className = 'card';
        btn.setAttribute('aria-label','Carta oculta');
        btn.setAttribute('data-symbol', symbol);
        btn.innerHTML = `
          <div class="card-inner">
            <div class="face front">‚ùì</div>
            <div class="face back"><img src="${symbol}" alt="carta"/></div>
          </div>
        `;
        btn.addEventListener('click', ()=> flip(btn));
        return btn;
      }

      function flip(card){
        if(lock) return;
        if(card.classList.contains('flipped') || card.classList.contains('matched')) return;
        if(!started){ started = true; startTimer(); }

        card.classList.add('flipped');
        if(!first){ first = card; return; }
        if(card === first){ return; }
        second = card; lock = true; moves++; movesEl.textContent = moves;

        const isMatch = first.dataset.symbol === second.dataset.symbol;
        if(isMatch){
          first.classList.add('matched');
          second.classList.add('matched');
          matches++; pairsEl.textContent = `${matches}/8`;
          resetPick();
          if(matches === icons.length){
            stopTimer();
            finalTimeEl.textContent = formatTime(seconds);
            finalMovesEl.textContent = moves;
            setTimeout(()=> modal.classList.add('show'), 400);
          }
        } else {
          setTimeout(()=>{
            first.classList.remove('flipped');
            second.classList.remove('flipped');
            resetPick();
          }, 750);
        }
      }

      function resetPick(){ first = null; second = null; lock = false; }

      function setup(){
        first = second = null; lock = false; matches = 0; moves = 0; seconds = 0; started = false;
        movesEl.textContent = '0';
        timeEl.textContent = '00:00';
        pairsEl.textContent = '0/8';
        stopTimer();
        modal.classList.remove('show');

        const deck = shuffle([...icons, ...icons]);
        board.innerHTML = '';
        deck.forEach(sym => board.appendChild(createCard(sym)));
      }

      newGameBtn.addEventListener('click', setup);
      playAgainBtn.addEventListener('click', setup);
      setup();
    })();
  </script>
</body>
</html>
